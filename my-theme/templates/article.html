{% extends "base.html" %}
{% block title %}{{ article.title|striptags }}{% endblock %}
{% block content %}
<article>
  <header>
    <h2 class="entry-title">
      <a href="{{ SITEURL }}/{{ article.url }}" rel="bookmark"
         title="Permalink to {{ article.title|striptags }}">{{ article.title }}</a></h1>
    {% include 'twitter.html' %}
  </header>

  <div class="entry-content">
    {% include 'article_infos.html' %}
    {{ article.content }}
  </div><!-- /.entry-content -->
  {% if DISQUS_SITENAME and SITEURL and article.status != "draft" %}
  <div class="comments">
    <h2>Comments !</h2>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = '{{ DISQUS_SITENAME }}';
      var disqus_identifier = '{{ article.url }}';
      var disqus_url = '{{ SITEURL }}/{{ article.url }}';
      (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//{{ DISQUS_SITENAME }}.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the comments.</noscript>
  </div>
  {% endif %}

</article>

{% endblock %}

{% block image %}
{% if article.photo_gallery %}
<div class="jumbotron">
  <h2 class="entry-title">
    <a href="#my-carousel">Photos</a></h2>
  <div id="my-carousel" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
      {% set image_position = 0 %}
      {% for name, photo, thumb, exif, caption in article.photo_gallery %}
      {% if loop.first %}
      <li data-target="#my-carousel" data-slide-to="{{ image_position }}" class="active"></li>
      {% endif %}
      {% set image_position = image_position + 1 %}
      <li data-target="#my-carousel" data-slide-to="{{ image_position }}"></li>
      {% endfor %}
    </ol>
    <div class="carousel-inner" role="listbox">
      {% for name, photo, thumb, exif, caption in article.photo_gallery %}
      {% if loop.first %}
      <div class="active item">
        <img src="{{ SITEURL }}/{{ photo }}" title="{{ name }}" exif="{{ exif }}" caption="{{ caption }}"></a>
      </div>
      {% endif %}
      <div class="item">
        <img src="{{ SITEURL }}/{{ photo }}" title="{{ name }}" exif="{{ exif }}" caption="{{ caption }}">
      </div>
      {% endfor %}
      <a class="left carousel-control" href="#my-carousel" role="button" data-slide="prev">
        <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </a>
      <a class="right carousel-control" href="#my-carousel" role="button" data-slide="next">
        <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </a>
    </div>
  </div>
</div>
{% endif %}
{% endblock %}
